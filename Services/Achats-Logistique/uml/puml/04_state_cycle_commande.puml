@startuml State_Cycle_Commande

title State Diagram - Cycle de Vie d'une Commande

[*] --> BesoinIdentifie : Marc identifie besoin

state "Besoin IdentifiÃ©" as BesoinIdentifie #90EE90
note right of BesoinIdentifie
  Marc a besoin de matÃ©riel
  pour son chantier
end note

BesoinIdentifie --> TentativeContact : Marc appelle Sylvie

state "Tentative de Contact" as TentativeContact #FFD700
note right of TentativeContact
  ğŸ”´ Pas de canal asynchrone
  DÃ©pend disponibilitÃ© Sylvie
end note

TentativeContact --> EnAttente : Sylvie pas dispo
TentativeContact --> RechercheProduit : Sylvie rÃ©pond

state "En Attente" as EnAttente #FF6B6B
note left of EnAttente
  â° 25 min perdu en moyenne
  Marc rappelle 3-4 fois
end note

EnAttente --> TentativeContact : Rappelle

state "Recherche Produit" as RechercheProduit #FFD700
note right of RechercheProduit
  Sylvie cherche dans Sage
end note

RechercheProduit --> Confusion : Trouve 12 rÃ©fÃ©rences !

state "Confusion RÃ©fÃ©rences" as Confusion #FF6B6B
note right of Confusion
  ğŸ”´ **CHAOS BASE DONNÃ‰ES**
  12 variantes pour 1 produit
  CABLE-3G2.5-ROUGE-50M
  CBL_3G25_R_50
  3G2.5-CABLE-ROUGE
  CABLE_3G_2.5_ROUGE
  3G2,5 CABLE ROUGE 50M
  ...
end note

Confusion --> ChoixReference : Sylvie choisit "au hasard"

state "Choix RÃ©fÃ©rence" as ChoixReference #FFD700
note left of ChoixReference
  âš ï¸ Risque Ã©levÃ© de se tromper
end note

ChoixReference --> Saisies : Passe commande

state "Saisies Multiples" as Saisies #FF6B6B {
  [*] --> SaisieEmail
  SaisieEmail --> SaisieSage : RE-SAISIE #5
  SaisieSage --> SaisieExcel : RE-SAISIE #6
  SaisieExcel --> [*]
}

note right of Saisies
  ğŸ”´ **6 RE-SAISIES**
  des mÃªmes donnÃ©es !
  â° 45 min perdu
end note

Saisies --> EnCours : Commande fournisseur passÃ©e

state "En Cours" as EnCours #FFFFAA
note right of EnCours
  Attente 2-3 jours
  â¸ï¸ Chantier bloquÃ©
  Chantier bloquÃ© perdu
end note

EnCours --> Livraison : Fournisseur livre

state "Livraison au DÃ©pÃ´t" as Livraison #98FB98

Livraison --> ReceptionEric : Ã‰ric vÃ©rifie

state "RÃ©ception" as ReceptionEric #FFD700 {
  [*] --> ChercheCommande
  ChercheCommande --> CompareRef : TrouvÃ© (15 min)
  CompareRef --> DoubteRef : Nomenclatures â‰ 
  DoubteRef --> AppelSylvie : Appelle Sylvie
  AppelSylvie --> Comptage : ConfirmÃ©
  Comptage --> SaisieReception : Compte manuellement
  SaisieReception --> [*] : RE-SAISIE #7
}

note left of ReceptionEric
  ğŸ”´ 100% manuel
  ğŸ”´ Pas de scan
  ğŸ”´ Nomenclatures incompatibles
  â° 1h30
end note

ReceptionEric --> Stocke : Rangement

state "StockÃ© au DÃ©pÃ´t" as Stocke #FFD700
note right of Stocke
  ğŸ”´ Pas de plan rangement
  "Quelque part" dans le dÃ©pÃ´t
end note

Stocke --> Recupere : Marc vient chercher

state "RÃ©cupÃ©rÃ©" as Recupere #90EE90

Recupere --> Verification : Marc vÃ©rifie

state "VÃ©rification Chantier" as Verification #FFD700

Verification --> Erreur : Taux Ã©levÃ© mauvais produit
Verification --> Utilise : Taux insuffisant bon produit

state "âŒ ERREUR" as Erreur #FF0000
note left of Erreur
  **CATASTROPHE**
  Mauvaise rÃ©fÃ©rence !
  ğŸ”´ Chantier bloquÃ© 3j
  Chantier bloquÃ© perdu
  ğŸ˜­ Marc furieux
end note

Erreur --> BesoinIdentifie : Recommence TOUT

state "âœ… UtilisÃ©" as Utilise #90EE90
Utilise --> [*]

note bottom
  **MÃ‰TRIQUES GLOBALES**
  â° DurÃ©e succÃ¨s: 3 jours
  â° DurÃ©e Ã©chec: 6 jours (recommence)
  âŒ Taux erreur: Ã‰levÃ©
  Process trÃ¨s inefficace
  Temps perdu important
  ğŸ“ Nombre appels: 12
end note

@enduml
