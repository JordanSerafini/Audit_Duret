@startuml
!theme plain
title Architecture CIBLE - SystÃ¨me IntÃ©grÃ© & Moderne

node "Terrain Mobile" as Terrain #E6FFE6 {
    agent "Marc\n(Chef Chantier)" as Marc
    component "App Odoo Native\n(iOS + Android)" as AppMobile #90EE90
    component "Mode Offline\n(Sync auto)" as Offline #98FB98
}

node "Data Center Hybrid" as DataCenter #E6F3FF {
    component "ERP Odoo v17\n(On-premise)" as Odoo #87CEEB
    database "PostgreSQL 15\n(Haute Performance)" as Postgres #4682B4
    component "API Gateway\n(REST + GraphQL)" as APIGateway #5F9EA0
    component "ML Engine\n(PrÃ©dictions)" as MLEngine #48D1CC
}

node "DÃ©pÃ´t ConnectÃ©" as DepotConnecte #FFF0E6 {
    agent "Ã‰ric\n(Magasinier)" as Eric
    component "Portique RFID\n(Zebra FX9600)" as PortiqueRFID #FFD700
    component "Douchettes Scan\n(Zebra MC3300)" as Douchettes #FFA500
    database "Stock Temps RÃ©el\n(RFID Tags)" as StockReel #FF8C00
}

cloud "Fournisseurs ConnectÃ©s" as CloudAPI #F0F8FF {
    component "Rexel API\n(Catalogue + Stock)" as RexelAPI #B0E0E6
    component "Sonepar API\n(Prix + Dispo)" as SoneAPI #B0E0E6
    component "Autres APIs\n(Extensible)" as AutresAPI #B0E0E6
}

cloud "Services Cloud" as ServicesCloud #F5F5F5 {
    component "Power BI\n(Dashboards)" as PowerBI #FFE4B5
    component "Azure Backup\n(DR)" as Backup #D3D3D3
    component "Monitoring\n(24/7)" as Monitor #C0C0C0
}

' Connexions principales - Vert pour les flux optimisÃ©s
Marc -down-> AppMobile : ğŸ“± Interface tactile\n(UX optimisÃ©e)
AppMobile -down-> APIGateway : ğŸ” HTTPS + JWT\n(SÃ©curisÃ©)

APIGateway -right-> Odoo : ğŸ”„ Transactions\n(Temps rÃ©el)
Odoo -down-> Postgres : ğŸ’¾ Persistance\n(ACID compliant)
APIGateway -up-> MLEngine : ğŸ¤– Suggestions\n(IA intÃ©grÃ©e)

Eric -up-> PortiqueRFID : ğŸ“¦ Scan automatique\n(2 sec/colis)
Eric -up-> Douchettes : ğŸ“± Scan mobile\n(QR + Code barre)
PortiqueRFID -down-> StockReel : ğŸ·ï¸ RFID tags\n(5000 produits)

' APIs externes
APIGateway -right-> RexelAPI : ğŸŒ Catalogue sync\n(Temps rÃ©el)
APIGateway -right-> SoneAPI : ğŸ’° Prix comparaison\n(Auto)
APIGateway -right-> AutresAPI : ğŸ“ˆ ExtensibilitÃ©\n(Future)

' Services cloud
Odoo -up-> PowerBI : ğŸ“Š Analytics\n(DirectQuery)
Postgres -up-> Backup : â˜ï¸ Sauvegarde\n(Quotidienne)
Odoo -up-> Monitor : ğŸ“ˆ MÃ©triques\n(Alertes)

' Flux de donnÃ©es principaux
StockReel -left-> Odoo : ğŸ“Š Stock sync\n(Bidirectionnel)
MLEngine -down-> Postgres : ğŸ§  Apprentissage\n(Historique)

' Annotations des amÃ©liorations
note right of AppMobile #E6FFE6
    ğŸŸ¢ **AMÃ‰LIORATIONS TERRAIN**
    â€¢ Interface intuitive
    â€¢ Mode offline robuste
    â€¢ Scan QR/Code barre
    â€¢ Photos gÃ©olocalisÃ©es
    â€¢ Signature Ã©lectronique
end note

note right of Odoo #E6F3FF
    ğŸŸ¢ **CÅ’UR SYSTÃˆME MODERNE**
    â€¢ Architecture microservices
    â€¢ APIs REST documentÃ©es
    â€¢ Haute disponibilitÃ© 99.9%
    â€¢ ScalabilitÃ© horizontale
    â€¢ IntÃ©grations natives
end note

note right of PortiqueRFID #FFF0E6
    ğŸŸ¢ **AUTOMATISATION TOTALE**
    â€¢ RÃ©ception 2 sec vs 20 min
    â€¢ 0 erreur comptage
    â€¢ Stock temps rÃ©el
    â€¢ TraÃ§abilitÃ© complÃ¨te
    â€¢ ROI 6 mois
end note

note right of RexelAPI #F0F8FF
    ğŸŸ¢ **Ã‰COSYSTÃˆME CONNECTÃ‰**
    â€¢ Catalogues synchronisÃ©s
    â€¢ Prix temps rÃ©el
    â€¢ Stock fournisseurs live
    â€¢ Commandes automatiques
    â€¢ 0 ressaisie manuelle
end note

' MÃ©triques de performance
legend bottom
    ğŸŸ¢ = AmÃ©lioration majeure
    ğŸ“± = Mobile-first
    ğŸ¤– = IA/ML intÃ©grÃ©
    ğŸ” = SÃ©curitÃ© renforcÃ©e
    âš¡ = Performance optimisÃ©e
    ğŸ“Š = Analytics temps rÃ©el
end legend

@enduml